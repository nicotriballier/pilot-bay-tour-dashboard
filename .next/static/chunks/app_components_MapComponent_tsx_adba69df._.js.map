{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/nicolastriballier/Documents/GitHub/pilot-bay-tour-dashboard/app/components/MapComponent.tsx"],"sourcesContent":["'use client';\n\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { useEffect, useRef } from 'react';\n\ninterface WeatherData {\n  tempC?: string;\n  wind?: string;\n  visibility?: string;\n  conditions?: string;\n  fetchedDate?: string;\n}\n\ninterface Airport {\n  code: string;\n  name: string;\n  lat: number;\n  lon: number;\n  weather?: WeatherData;\n}\n\ninterface MapComponentProps {\n  airports: Airport[];\n  selectedAirport: string;\n  onAirportSelect: (code: string) => void;\n}\n\n// Sam's Chowder House camera location (5 miles northeast: ~0.0725 degrees north, ~0.0735 degrees east)\nconst SAMS_CHOWDER_HOUSE = { lat: 37.2234, lon: -122.393 };\n\n// Treasure Island video marker location (5 miles south: ~0.0725 degrees south)\nconst TREASURE_ISLAND_VIDEO = { lat: 37.8199, lon: -123.0535 };\n\n// Lawrence Hall of Science location (5 miles north - approximately 0.0725 degrees latitude)\nconst LAWRENCE_HALL = { lat: 37.7325, lon: -122.065 };\n\n\n// Custom icon for airports with code and weather data (no pin)\nconst createAirportIcon = (isSelected: boolean, code: string, name: string, weather?: WeatherData) => {\n  const isClear = weather?.conditions?.toUpperCase().includes('CLR') ||\n                  weather?.conditions?.toUpperCase().includes('CLEAR') ||\n                  weather?.conditions === 'CLR';\n  const conditionsColor = isClear ? '#666' : '#ef4444';\n  const zIndex = isSelected ? '1000' : 'auto';\n\n  const weatherHtml = weather ? `\n    <div style=\"\n      background: white;\n      padding: 6px 8px;\n      border-radius: 4px;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n      border: 2px solid #3b82f6;\n      white-space: nowrap;\n      font-size: 9px;\n      line-height: 1.3;\n      text-align: left;\n      min-width: 110px;\n      position: relative;\n      z-index: ${zIndex};\n    \">\n      <div style=\"color: #000; font-weight: bold; font-size: 10px; margin-bottom: 3px;\">${code}</div>\n      <div style=\"color: #000; font-weight: bold;\">${weather.tempC || 'N/A'}</div>\n      <div style=\"color: #666;\">${weather.wind || 'N/A'}</div>\n      <div style=\"color: #666;\">${weather.visibility || 'N/A'}</div>\n      <div style=\"color: ${conditionsColor}; font-weight: ${isClear ? 'normal' : 'bold'};\">${weather.conditions || 'N/A'}</div>\n      <div style=\"color: #999; font-size: 7px; margin-top: 2px;\">${weather.fetchedDate || 'N/A'}</div>\n    </div>\n  ` : `\n    <div style=\"\n      background: white;\n      padding: 6px 8px;\n      border-radius: 4px;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n      border: 2px solid #3b82f6;\n      white-space: nowrap;\n      font-size: 9px;\n      text-align: left;\n      min-width: 110px;\n      position: relative;\n      z-index: ${zIndex};\n    \">\n      <div style=\"color: #000; font-weight: bold; font-size: 10px;\">${code}</div>\n      <div style=\"color: #999; font-size: 8px;\">Loading...</div>\n    </div>\n  `;\n\n  return L.divIcon({\n    className: 'custom-airport-marker',\n    html: weatherHtml,\n    iconSize: [120, 90],\n    iconAnchor: [60, 45],\n    popupAnchor: [0, -45],\n  });\n};\n\n// Component to add combined camera image overlay (North and South)\nfunction CameraOverlay() {\n  const map = useMap();\n  const overlayRef = useRef<L.Marker | null>(null);\n\n  useEffect(() => {\n    const cameraIcon = L.divIcon({\n      className: 'camera-image-overlay',\n      html: `\n        <div style=\"\n          background: white;\n          padding: 12px;\n          border-radius: 8px;\n          box-shadow: 0 4px 6px rgba(0,0,0,0.3);\n          border: 3px solid #10b981;\n        \">\n          <div style=\"display: flex; gap: 12px;\">\n            <div>\n              <div style=\"font-weight: bold; margin-bottom: 6px; font-size: 14px;\">Sam's Chowder House / KHAF (North)</div>\n              <img\n                src=\"https://cams.samschowderhouse.com/south.jpg?${Date.now()}\"\n                style=\"width: 480px; height: 360px; border-radius: 4px; display: block;\"\n                alt=\"Camera feed North\"\n              />\n            </div>\n            <div>\n              <div style=\"font-weight: bold; margin-bottom: 6px; font-size: 14px;\">Sam's Chowder House / KHAF (South)</div>\n              <img\n                src=\"https://cams.samschowderhouse.com/north.jpg?${Date.now()}\"\n                style=\"width: 480px; height: 360px; border-radius: 4px; display: block;\"\n                alt=\"Camera feed South\"\n              />\n            </div>\n          </div>\n        </div>\n      `,\n      iconSize: [1008, 433],\n      iconAnchor: [1008, 216],\n    });\n\n    overlayRef.current = L.marker([SAMS_CHOWDER_HOUSE.lat, SAMS_CHOWDER_HOUSE.lon], {\n      icon: cameraIcon,\n    }).addTo(map);\n\n    // Refresh image every 30 seconds\n    const interval = setInterval(() => {\n      if (overlayRef.current) {\n        const updatedIcon = L.divIcon({\n          className: 'camera-image-overlay',\n          html: `\n            <div style=\"\n              background: white;\n              padding: 12px;\n              border-radius: 8px;\n              box-shadow: 0 4px 6px rgba(0,0,0,0.3);\n              border: 3px solid #10b981;\n            \">\n              <div style=\"display: flex; gap: 12px;\">\n                <div>\n                  <div style=\"font-weight: bold; margin-bottom: 6px; font-size: 14px;\">Sam's Chowder House / KHAF (North)</div>\n                  <img\n                    src=\"https://cams.samschowderhouse.com/south.jpg?${Date.now()}\"\n                    style=\"width: 480px; height: 360px; border-radius: 4px; display: block;\"\n                    alt=\"Camera feed North\"\n                  />\n                </div>\n                <div>\n                  <div style=\"font-weight: bold; margin-bottom: 6px; font-size: 14px;\">Sam's Chowder House / KHAF (South)</div>\n                  <img\n                    src=\"https://cams.samschowderhouse.com/north.jpg?${Date.now()}\"\n                    style=\"width: 480px; height: 360px; border-radius: 4px; display: block;\"\n                    alt=\"Camera feed South\"\n                  />\n                </div>\n              </div>\n            </div>\n          `,\n          iconSize: [1008, 433],\n          iconAnchor: [1008, 216],\n        });\n        overlayRef.current.setIcon(updatedIcon);\n      }\n    }, 30000);\n\n    return () => {\n      clearInterval(interval);\n      if (overlayRef.current) {\n        map.removeLayer(overlayRef.current);\n      }\n    };\n  }, [map]);\n\n  return null;\n}\n\n// Component to add video overlay\nfunction VideoOverlay() {\n  const map = useMap();\n  const overlayRef = useRef<L.Marker | null>(null);\n\n  useEffect(() => {\n    const videoIcon = L.divIcon({\n      className: 'video-overlay',\n      html: `\n        <div style=\"\n          background: white;\n          padding: 12px;\n          border-radius: 8px;\n          box-shadow: 0 4px 6px rgba(0,0,0,0.3);\n          border: 3px solid #ef4444;\n        \">\n          <div style=\"font-weight: bold; margin-bottom: 6px; font-size: 14px;\">Treasure Island</div>\n          <iframe\n            width=\"768\"\n            height=\"432\"\n            src=\"https://www.youtube.com/embed/BSWhGNXxT9A?autoplay=1&mute=1&loop=1&playlist=BSWhGNXxT9A\"\n            title=\"YouTube video player\"\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n            style=\"border-radius: 4px; display: block;\"\n          ></iframe>\n        </div>\n      `,\n      iconSize: [792, 516],\n      iconAnchor: [396, 258],\n    });\n\n    overlayRef.current = L.marker([TREASURE_ISLAND_VIDEO.lat, TREASURE_ISLAND_VIDEO.lon], {\n      icon: videoIcon,\n    }).addTo(map);\n\n    return () => {\n      if (overlayRef.current) {\n        map.removeLayer(overlayRef.current);\n      }\n    };\n  }, [map]);\n\n  return null;\n}\n\n// Component to add Lawrence Hall of Science overlay\nfunction LawrenceHallOverlay() {\n  const map = useMap();\n  const overlayRef = useRef<L.Marker | null>(null);\n\n  useEffect(() => {\n    const lawrenceIcon = L.divIcon({\n      className: 'lawrence-image-overlay',\n      html: `\n        <div style=\"\n          background: white;\n          padding: 12px;\n          border-radius: 8px;\n          box-shadow: 0 4px 6px rgba(0,0,0,0.3);\n          border: 3px solid #f59e0b;\n        \">\n          <div style=\"font-weight: bold; margin-bottom: 6px; font-size: 14px;\">Lawrence Hall of Science</div>\n          <img\n            src=\"https://www.ocf.berkeley.edu/~thelawrence/images/newview.jpg\"\n            style=\"width: 480px; height: 360px; border-radius: 4px; display: block;\"\n            alt=\"Lawrence Hall view\"\n          />\n        </div>\n      `,\n      iconSize: [504, 396],\n      iconAnchor: [252, 396],\n    });\n\n    overlayRef.current = L.marker([LAWRENCE_HALL.lat, LAWRENCE_HALL.lon], {\n      icon: lawrenceIcon,\n    }).addTo(map);\n\n    return () => {\n      if (overlayRef.current) {\n        map.removeLayer(overlayRef.current);\n      }\n    };\n  }, [map]);\n\n  return null;\n}\n\n\nexport default function MapComponent({ airports, selectedAirport, onAirportSelect }: MapComponentProps) {\n  return (\n    <MapContainer\n      center={[37.55, -122.2]}\n      zoom={9.5}\n      style={{ height: '100%', width: '100%' }}\n      scrollWheelZoom={true}\n    >\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n\n      {airports.map((airport) => {\n        return (\n          <Marker\n            key={airport.code}\n            position={[airport.lat, airport.lon]}\n            icon={createAirportIcon(airport.code === selectedAirport, airport.code, airport.name, airport.weather)}\n            zIndexOffset={airport.code === selectedAirport ? 1000 : 0}\n            eventHandlers={{\n              click: () => onAirportSelect(airport.code),\n            }}\n          >\n            <Popup>\n              <div className=\"text-center\">\n                <div className=\"font-bold text-lg\">{airport.code}</div>\n                <div className=\"text-sm\">{airport.name}</div>\n              </div>\n            </Popup>\n          </Marker>\n        );\n      })}\n\n      {/* Camera image overlay - always visible */}\n      <CameraOverlay />\n\n      {/* Video overlay - always visible with autoplay */}\n      <VideoOverlay />\n\n      {/* Lawrence Hall of Science overlay */}\n      <LawrenceHallOverlay />\n    </MapContainer>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}